(this["webpackJsonpbusy-body"]=this["webpackJsonpbusy-body"]||[]).push([[0],{107:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),i=a.n(o),s=(a(82),a(38)),c=a(39),l=a(26),m=a(70),d=a(69),u=(a(83),a(34)),p=a.n(u),h=new DOMParser;function g(e,t){var a=e[t.nodeName];a?Array.isArray(a)?e[t.nodeName].push({}):e[t.nodeName]=[a,{}]:e[t.nodeName]={}}function f(e){var t={},a=h.parseFromString(e,"application/xml");return a?function e(t,a){if(t)for(var n=0;n<t.length;n++){var r=t[n];if(r)if(r.hasAttributes()){g(a,r);for(var o=r.getAttributeNames(),i={},s=0;s<o.length;s++)i["@"+o[s]]=r.getAttribute(o[s]);i["#text"]=r.textContent,Array.isArray(a[r.nodeName])?a[r.nodeName][a[r.nodeName].length-1]=i:a[r.nodeName]=i,r.children.length>0&&e(r.children,a)}else if(r.children.length>0)g(a,r),e(r.children,Array.isArray(a[r.nodeName])?a[r.nodeName][a[r.nodeName].length-1]:a[r.nodeName]);else{var c=h.parseFromString(r.textContent,"text/html");a[r.nodeName]=c.body.textContent||""}}else console.error("List is not defined")}(a.children,t):console.log("Invalid XML string: "+e),t}var b=a(51),v=a(45),y=a(164),E=a(159),w=a(163),x=a(162),k=a(161),C=a(158),N=a(35),j=a(153),S=a(156),O=a(160),F=a(165),I=a(172),B=a(173);var T=Object(j.a)((function(e){return{icon:{marginRight:e.spacing(2)},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)},loading:{display:"flex",flexGrow:1,alignContent:"center",alignItems:"center",margin:"auto",textAlign:"center"},margin:{marginTop:"100px",marginBottom:"100px"}}}));function R(e){var t="";return e["media:content"]&&e["media:content"]["@url"]?t=e["media:content"]["@url"]:e["media:group"]&&e["media:group"]["media:content"]&&e["media:group"]["media:content"][1]["@url"]?t=e["media:group"]["media:content"][1]["@url"]:e.rssImage&&e.rssImage.url&&(t=e.rssImage.url),t}function D(e){var t,a,o,i,s=T(),c=(t=e.rss.length,Math.ceil(t/30)),l=Object(n.useState)(1),m=Object(v.a)(l,2),d=m[0],u=m[1],p=(a=e.rss,o=30,i=d,a.slice((i-1)*o,i*o));return e.rss.length>0&&!e.error?r.a.createElement(S.a,{className:s.cardGrid,maxWidth:"lg"},r.a.createElement(C.a,{container:!0,spacing:4},p.map((function(e,t,a){return r.a.createElement(C.a,{item:!0,key:t,xs:12,sm:6,md:4},r.a.createElement(E.a,{className:s.card},r.a.createElement(O.a,{title:e&&e.rssTitle?e.rssTitle:"",subheader:e&&e.pubDate?e.pubDate:""}),r.a.createElement(k.a,{className:s.cardMedia,image:R(e),title:"Image title"}),r.a.createElement(x.a,{className:s.cardContent},r.a.createElement(N.a,{gutterBottom:!0,variant:"h5",component:"h2"},e.title),r.a.createElement(N.a,null,e.description)),r.a.createElement(w.a,null,r.a.createElement(y.a,{size:"small",color:"primary",onClick:function(){window.location=e.link}},"View"))))}))),r.a.createElement(C.a,{container:!0,justify:"center"},r.a.createElement("div",{className:s.root,style:{marginBottom:"50px",marginTop:"150px"}},r.a.createElement(I.a,{count:c,color:"secondary",onChange:function(e,t){u(t)}})))):e.error?r.a.createElement(C.a,{container:!0,justify:"center"},r.a.createElement(B.a,{severity:"error",className:s.margin},"Unable to load rss feeds. Please try again later.")):r.a.createElement(C.a,{container:!0,justify:"center"},r.a.createElement(F.a,null))}var A=a(169),M=a(168),P=a(170),W=a(167),G=a(66),L=a.n(G),J=a(12),z=a(174),U=a(67),Y=a.n(U),V=a(175),X=a(166),$=a(171),_=Object(j.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,color:"#fff"},selectEmpty:{marginTop:e.spacing(2),color:"#fff","&:before":{border:"none"},"&:hover:not(.Mui-disabled):before":{border:"none"}},icon:{fill:"#fff"},sortColor:{color:"fff"}}}));function q(e){var t=_(),a=r.a.useState(""),n=Object(v.a)(a,2),o=n[0],i=n[1];return r.a.createElement(X.a,{className:t.formControl},r.a.createElement($.a,{labelId:"sortBy",id:"sort",value:o,onChange:function(t){var a=t.target.value;i(a),e.sort(a)},displayEmpty:!0,className:t.selectEmpty,inputProps:{classes:{icon:t.icon}}},r.a.createElement(V.a,{value:""},r.a.createElement("em",null,"None")),e.titles&&e.titles.length>0&&e.titles.map((function(e,t){return r.a.createElement(V.a,{key:t,value:e},e)}))))}function H(){return r.a.createElement(N.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(W.a,{color:"inherit",href:"https://material-ui.com/"},"busyBodyFeeder.com")," ",(new Date).getFullYear(),".")}var K=Object(j.a)((function(e){return{icon:{marginRight:e.spacing(2)},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)},search:Object(b.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(J.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(J.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(b.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}));function Q(e){var t=K();return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,null),r.a.createElement(A.a,{position:"sticky"},r.a.createElement(P.a,null,r.a.createElement(L.a,null),r.a.createElement(N.a,{variant:"h6",color:"inherit",noWrap:!0},"RSS Feeds"),r.a.createElement("div",{className:t.search},r.a.createElement("div",{className:t.searchIcon},r.a.createElement(Y.a,null)),r.a.createElement(z.a,{placeholder:"Search\u2026",classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"},onChange:e.search})),r.a.createElement(q,{titles:e.titles,sort:e.sort}))),r.a.createElement("main",null,r.a.createElement("div",{className:t.heroContent},r.a.createElement(S.a,{maxWidth:"sm"},r.a.createElement(N.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0},"Daily Feeds"),r.a.createElement(N.a,{variant:"h5",align:"center",color:"textSecondary",paragraph:!0},"Are you a busy body when it comes to news? Take a gander at all these articles from various RSS feeds. You can search for feeds in the search bar or sort by your favorite feeds."))),r.a.createElement(D,{rss:e.rss,error:e.error})),r.a.createElement("footer",{className:t.footer},r.a.createElement(N.a,{variant:"h6",align:"center",gutterBottom:!0},"Busy Body RSS Feeder"),r.a.createElement(N.a,{variant:"subtitle1",align:"center",color:"textSecondary",component:"p"},"Thanks for checking out the site"),r.a.createElement(H,null)))}var Z=a(68),ee=a.n(Z),te=function(){function e(t,a){Object(s.a)(this,e),this.id=t,this.path=a}return Object(c.a)(e,[{key:"getPath",value:function(){return this.path}},{key:"getId",value:function(){return this.id}}]),e}(),ae=[new te("cnn","http://rss.cnn.com/rss/cnn_topstories.rss"),new te("bbc","http://feeds.bbci.co.uk/news/rss.xml#"),new te("fox","http://feeds.foxnews.com/foxnews/latest"),new te("wsj","https://feeds.a.dj.com/rss/RSSWSJD.xml"),new te("nyt","https://archive.nytimes.com/www.nytimes.com/services/xml/rss/index.html?mcubz=0"),new te("yahoo","https://www.yahoo.com/news/rss/world")];var ne=[],re=[],oe=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={rss:[],error:!1},n.search=n.search.bind(Object(l.a)(n)),n.sort=n.sort.bind(Object(l.a)(n)),n.transformFeeds=n.transformFeeds.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"search",value:function(e){var t=e.target.value;if(""!==t){if(t.length>=3){var a=new RegExp(t,"gi"),n=p.a.cloneDeep(this.state.rss).filter((function(e){return e&&e.description&&-1!==e.description.search(a)||e&&e.title&&-1!==e.title.search(a)}));n.length>0&&this.setState({rss:n})}}else this.setState({rss:p.a.cloneDeep(this.transformFeeds(ne))})}},{key:"sort",value:function(e){if(""!==e){var t=p.a.cloneDeep(ne).find((function(t){return t&&t.title&&t.title===e}));t&&this.setState({rss:this.transformFeeds(t)})}else this.setState({rss:this.transformFeeds(ne)})}},{key:"componentDidMount",value:function(){var e=this;Promise.all(ae.map((function(e){return ee.a.get("https://cors-anywhere.herokuapp.com/"+encodeURI(e.getPath()))}))).then((function(t){var a=t.map((function(e){var t=f(e.data);if(!p.a.isEmpty(t)&&t.channel)return t.channel}));ne=a,a.forEach((function(e){e&&re.push(e.title)})),e.setState({rss:e.transformFeeds(a)})})).catch((function(t){e.setState({error:!0}),console.error(t)}))}},{key:"updateFeed",value:function(e,t){if(e){var a=e.title,n=e.item,r=e.image;if(n)for(var o=0;o<n.length;o++){var i=n[o];i.rssTitle=a,i.rssImage=r,t.push(i)}}}},{key:"transformFeeds",value:function(e){var t=[];if(e&&e.length)for(var a=0;a<e.length;a++){var n=e[a];this.updateFeed(n,t)}else e&&this.updateFeed(e,t);return t}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Q,{rss:this.state.rss,error:this.state.error,titles:re,search:this.search,sort:this.sort}))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},77:function(e,t,a){e.exports=a(107)},82:function(e,t,a){},83:function(e,t,a){}},[[77,1,2]]]);
//# sourceMappingURL=main.d1bbadaa.chunk.js.map